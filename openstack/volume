容器挂载卷
http://www.alexecollins.com/docker-persistence/
http://stackoverflow.com/questions/28673303/docker-and-cinder-is-it-possible-in-openstack
http://lists.openstack.org/pipermail/openstack-dev/2013-December/021442.html


docker不支持在线挂载，可以在创建容器时挂载，需要预先把卷创建。
现有的容器span流程。没有理会block_device_info，需要修改。

Adding a data volume
http://docs.docker.com/userguide/dockervolumes/

测试
文件目录
docker run -i -t -v /home/mount_test:/home/mount_test centos:centos7 /bin/bash

块设备
docker run -i -t -v /dev/loop4:/dev/sdb --cap-add=SYS_ADMIN centos:centos7 /bin/bash
docker run -i -t -v /dev/loop4:/dev/sdb --privileged centos:centos7 /bin/bash

出现的问题
所有的容器已经删除，在host上无法mount
mount: /dev/sda2 is already mounted
删除容器时，需要做umount处理？？？

创建卷
qemu-img create -f raw -o size=4G vol6

挂载自动分配loop号
losetup -f vol6
卸载指定loop设备
losetup -d /dev/loop4
查看
losetup -a

docker-py中volumes参数用法
https://docker-py.readthedocs.org/en/latest/volumes/

http://blog.csdn.net/u012557314/article/details/41443005
http://docs.openstack.org/user-guide/content/boot_from_volume.html

从镜像启动（创建一个新卷）
http://docs.openstack.org/user-guide/content/attach_volume_to_instance.html
从镜像启动                  不支持数据盘
从快照启动                  不支持数据盘
从云硬盘启动                不支持数据盘
从镜像启动（创建一个新卷）      支持数据盘，新卷作为数据盘
从云硬盘快照启动（创建一个新卷）支持数据盘，新卷作为数据盘

需要格式化卷, 和挂载
mount /dev/sdb /mnt

使用volumes的方式
juno版本修改为
spawn中
'volumes': '/dev/sdb'

_start_container中
self.docker.start(container_id, binds={'/dev/loop4':{'bind':'/dev/sdb'}})
异常，去掉'ro':False即可
cannot bind mount volume: ro volume paths must be absolute.

使用device的方式
juno版本修改为
_start_container中
devices=['/dev/loop4:/dev/sdb']


https://review.openstack.org/#/admin/groups/304,members
